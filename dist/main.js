(()=>{"use strict";const e=e=>{let t=0;return{len:e,hit:function(){return t+=1,1},isSunk:function(){return t===e}}},t=()=>{const t=e(5),n=e(4),r=e(3),l=e(3),c=[e(2),l,r,n,t],i=10,s=Array(i).fill().map((()=>Array(i).fill(0))),o=[];function a(e,t,n,r){if(n){for(let n=t;n<t+r;n++)if(s[e][n])return!1}else for(let n=e;n<e+r;n++)if(s[n][t])return!1;return!0}return{place:function(e,t,n,r){const l=c[r];if(e>9||t>9)return!1;if(1===n&&t+l.len<11){if(!a(e,t,n,l.len))return!1;for(let n=0;n<i;n++)for(let r=0;r<i;r++)n===e&&r<t+l.len&&r>=t&&(s[n][r]=l);return l.len}if(0===n&&e+l.len<11){if(!a(e,t,n,l.len))return!1;for(let n=0;n<i;n++)for(let r=0;r<i;r++)n>=e&&n<e+l.len&&r===t&&(s[n][r]=l);return l.len}return!1},recieveAttack:function(e,t){return 1===s[e][t]?null:s[e][t]?(s[e][t]=s[e][t].hit(),[e,t]):(function(e,t){o.push([e,t])}(e,t),!1)},haveAllSunk:function(e){return e.every((e=>!0===e))},missedAtks:o}},n=(()=>{const e=t();let n=5;return{gb:e,attackTile:function(e,t,n){return n.recieveAttack(e,t)},placeShip:function(t,r,l){if(!n)return!1;const c=e.place(t,r,l,n-1);return c&&(n-=1),c}}})(),r=(t(),{gameboard:function(){const e=document.querySelector("#playerGb"),t=document.querySelector("#aiGb");for(let t=0;t<10;t++)for(let n=0;n<10;n++){const r=document.createElement("div");r.classList.add("ptile"),r.classList.add(`p${t}x`),r.classList.add(`p${n}y`),e.append(r)}for(let e=0;e<10;e++)for(let n=0;n<10;n++){const r=document.createElement("div");r.classList.add("aitile"),r.classList.add(`a${e}x`),r.classList.add(`a${n}y`),t.append(r)}}}),l=(()=>{const e=document.querySelector("#axisBtn");return{getCoords:e=>{let t,n;return 3===e.target.classList.length&&(t=e.target.classList[1].charAt(1),n=e.target.classList[2].charAt(1)),[Number(t),Number(n)]},determineAxis:()=>"X"===e.textContent?1:0,changeAxisBtn:e=>{"X"===e.target.textContent?e.target.textContent="Y":e.target.textContent="X"}}})();function c(e){const t=l.getCoords(e),r=l.determineAxis(),c=n.placeShip(t[0],t[1],r);c&&((e,t,n,r)=>{if(n)for(let n=t;n<t+r;n++)document.querySelector(`.ptile.p${e}x.p${n}y`).classList.add("select");else for(let n=e;n<e+r;n++)document.querySelector(`.ptile.p${n}x.p${t}y`).classList.add("select")})(t[0],t[1],r,c)}r.gameboard(),document.querySelectorAll(".ptile").forEach((e=>e.addEventListener("click",c))),document.querySelector("#axisBtn").addEventListener("click",l.changeAxisBtn)})();